import{d as M,a as v,q as w,aB as x,u as m,c as g,aU as L,aG as p,b0 as K,ba as H,h as $,bU as j,aA as A,aN as O,aM as Y,bV as G,aH as y,bR as I,bW as X,bX as Z,w as J,p as Q,v as ee,aT as S,bY as oe,bZ as ae,x as D,z as te,y as ne,b_ as re,b$ as le,c0 as ie,c1 as ce}from"./arco.602e1a55.js";import{u as B,e as P,f as ue}from"./vue.c9103a21.js";import{o as se,u as T,p as de,_ as N,m as U,q as me}from"./index.09d5919c.js";import{c as pe}from"./index.f0a0cf77.js";const ge=M({__name:"index",setup(a){const o=B(),l=[{name:"\u6570\u5B57\u5316\u8425\u9500",type:"1",list:[{icon:"https://image.parligerly.com/protal-svg/mark.svg",logo:"https://image.parligerly.com/protal-svg/mark-logo.svg",title:"Marketing Automation",desc:"\u5168\u6E20\u9053\u81EA\u52A8\u5316\u8FD0\u8425\u4E2D\u67A2"},{icon:"https://image.parligerly.com/protal-svg/insi.svg",logo:"https://image.parligerly.com/protal-svg/insi-logo.svg",title:"Insight Force",desc:"\u7ECF\u8425\u5206\u6790\u5E73\u53F0"}]},{name:"\u6570\u5B57\u5316\u5EFA\u8BBE",type:"2",list:[{icon:"https://image.parligerly.com/protal-svg/metr.svg",logo:"https://image.parligerly.com/protal-svg/metr-logo.svg",title:"Metrics Force",desc:"\u6307\u6807\u5E73\u53F0"},{icon:"https://image.parligerly.com/protal-svg/cust.svg",logo:"https://image.parligerly.com/protal-svg/cust-logo.svg",title:"Customer Engine",desc:"\u7528\u6237\u6570\u636E\u5E73\u53F0"},{icon:"https://image.parligerly.com/protal-svg/data.svg",logo:"https://image.parligerly.com/protal-svg/data-logo.svg",title:"Data Engine",desc:"\u5927\u6570\u636E\u5F00\u53D1\u6CBB\u7406\u5957\u4EF6"}]},{name:"\u6570\u5B57\u5316\u4F9B\u5E94\u94FE",type:"3",list:[{icon:"https://image.parligerly.com/protal-svg/dema.svg",logo:"https://image.parligerly.com/protal-svg/dema-logo.svg",title:"Demand Forecasting",desc:"\u667A\u80FD\u9884\u6D4B"},{icon:"https://image.parligerly.com/protal-svg/repl.svg",logo:"https://image.parligerly.com/protal-svg/repl-logo.svg",title:"Replenishment",desc:"\u667A\u80FD\u8865\u8D27"},{icon:"https://image.parligerly.com/protal-svg/asso.svg",logo:"https://image.parligerly.com/protal-svg/asso-logo.svg",title:"Assortment",desc:"\u667A\u80FD\u9009\u54C1"}]}],t=[],i=[{label:"xxx\u6709\u9650\u516C\u53F8",value:"1",key:"1"},{label:"xxxxxx\u6709\u9650\u516C\u53F8",value:"2",key:"2"}],c=v("https://image.parligerly.com/protal-svg/logo-hom.svg"),e=v(l),n=v(t),h=v("2"),k=v(i),C=v("1"),r=s=>{console.log("item---",s),c.value=s.logo},_=s=>{console.log("key---",s);const u=t.find(d=>d.resourceCode===s);o.push({path:(u==null?void 0:u.resourceLink)||"/"})},f=s=>{console.log("value---",s)};return(s,u)=>(w(),x(m(pe),{logo:c.value,logoMenus:e.value,onLogoMenuClick:r,menus:n.value,activeMenu:h.value,"onUpdate:activeMenu":u[0]||(u[0]=d=>h.value=d),onMenuItemClick:_,tenant:C.value,tenantOptions:k.value,onTenantChange:f},null,8,["logo","logoMenus","menus","activeMenu","tenant","tenantOptions"]))}}),fe=(a,o)=>{const{target:l="_blank",...t}=o||{};window.open(a,l,Object.entries(t).reduce((i,c)=>{const[e,n]=c;return[...i,`${e}=${n}`]},[]).join(","))},he=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i");function ve(){const a=se();return{menuTree:g(()=>a.menus)}}function be(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!K(a)}const ye=M({name:"ALeftMenu",components:{Menu:L},props:{...L.props,menuTree:{type:Array,default:()=>[]},menuItemClick:{type:Function,default:()=>{}}},setup(a,{attrs:o}){const l=()=>{function t(i,c=[]){return i&&i.forEach(e=>{const n=e.resourceIcon?()=>$(j(`<${e.resourceIcon}/>`)):null,h=e.childrens&&e.childrens.length!==0?p(A("a-sub-menu"),{key:e==null?void 0:e.resourceCode},{default:()=>[t(e==null?void 0:e.childrens)],icon:n,title:()=>$(j(e.resourceName||""))}):p(A("a-menu-item"),{key:e.resourceCode,onClick:()=>a.menuItemClick(e),class:"a-menu-item-isLeaf"},{default:()=>[e.resourceName||""],icon:n});c.push(h)}),c}return t(a.menuTree)};return()=>{let t;return p(L,H(a,o,{class:"a-left-menu"}),be(t=l())?t:{default:()=>[t]})}}});var we=M({emit:["collapse"],setup(){const a=T(),o=B(),l=P(),t=v([]),{menuTree:i}=ve(),c=g({get(){return a.device==="desktop"?a.menuCollapse:!1},set(r){a.updateSettings({menuCollapse:r})}});O(()=>{console.log("menuTree.value",i.value),t.value=i.value});const e=v([]),n=v([]),h=r=>{if(he.test((r==null?void 0:r.resourcePath)||"")){fe(r.resourcePath),n.value=[r.resourceCode];return}if(l.name===r.resourceCode){n.value=[l.name];return}o.push({name:r.resourceCode})},k=r=>{const _=[];let f=!1;const s=(u,d,z)=>{var b;if(u.resourceCode===z){f=!0,_.push(...d,u.resourceCode);return}(b=u.childrens)!=null&&b.length&&u.childrens.forEach(F=>{f||s(F,[...d,F.resourceCode],z)})};return i.value.forEach(u=>{f||s(u,[u.resourceCode],r)}),_};de(r=>{const{requiresAuth:_,activeMenu:f,hideInMenu:s}=r.meta;if(_&&(!s||f)){const u=k(f||r.name),d=new Set([...u,...e.value]);e.value=[...d],n.value=[f||u[u.length-1]]}},!0);const C=r=>{a.device==="desktop"&&a.updateSettings({menuCollapse:r})};return()=>p(ye,{collapsed:c.value,"onUpdate:collapsed":r=>c.value=r,"open-keys":e.value,"onUpdate:open-keys":r=>e.value=r,"auto-open":!1,"selected-keys":n.value,"auto-open-selected":!0,onCollapse:C,menuTree:t.value,menuItemClick:h},null)}});var R=N(we,[["__scopeId","data-v-7cb665ec"]]);function _e(){const a=U();return{accessRouter(o){var l,t,i,c,e,n;return!((l=o.meta)!=null&&l.requiresAuth)||!((t=o.meta)!=null&&t.roles)||((c=(i=o.meta)==null?void 0:i.roles)==null?void 0:c.includes("*"))||((n=(e=o.meta)==null?void 0:e.roles)==null?void 0:n.includes(a.role))},findFirstPermissionRoute(o,l="admin"){var i,c;const t=[...o];for(;t.length;){const e=t.shift();if((c=(i=e==null?void 0:e.meta)==null?void 0:i.roles)!=null&&c.find(n=>n.includes("*")||n.includes(l)))return{name:e.name};e!=null&&e.children&&t.push(...e.children)}return null}}}function xe(a,o,l,t=!1){a.addEventListener&&typeof a.addEventListener=="function"&&a.addEventListener(o,l,t)}function ke(a,o,l,t=!1){a.removeEventListener&&typeof a.removeEventListener=="function"&&a.removeEventListener(o,l,t)}const Ce=992;function Me(){return document.body.getBoundingClientRect().width-1<Ce}function ze(a){const o=T();function l(){if(!document.hidden){const i=Me();o.toggleDevice(i?"mobile":"desktop"),o.toggleMenu(i)}}const t=ue(l,100);O(()=>{a&&t()}),Y(()=>{xe(window,"resize",t)}),G(()=>{ke(window,"resize",t)})}const Ee=M({__name:"page-layout",setup(a){const o=me(),l=g(()=>o.getCacheList);return(t,i)=>{const c=A("router-view");return w(),x(c,null,{default:y(({Component:e,route:n})=>[p(Z,{name:"fade",mode:"out-in",appear:""},{default:y(()=>[n.meta.ignoreCache?(w(),x(I(e),{key:n.fullPath})):(w(),x(X,{key:1,include:m(l)},[(w(),x(I(e),{key:n.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}});const Fe={key:0,class:"layout-navbar"},Le={class:"menu-wrapper"},Se=M({__name:"default-layout",setup(a){const o=T(),l=U(),t=B(),i=P(),c=_e();ze(!0);const e=g(()=>o.navbar),n=g(()=>o.menu),h=g(()=>o.hideMenu),k=g(()=>o.menuMinWidth),C=g(()=>o.menuMaxWidth),r=g(()=>o.menuCollapse?k.value:C.value),_=g(()=>o.menuCollapse),f=g(()=>e.value?"layout-content layout-content-padding-top":"layout-content"),s=g(()=>({...n.value&&!h.value?{paddingLeft:`${r.value}`}:{}})),u=b=>{o.updateSettings({menuCollapse:b})};J(()=>l.role,b=>{b&&!c.accessRouter(i)&&t.push({name:"notFound"})});const d=v(!1),z=()=>{d.value=!1};return Q("toggleDrawerMenu",()=>{d.value=!d.value}),(b,F)=>{const W=re,V=le,q=ie,E=ce;return w(),x(E,{class:D(["layout",{mobile:m(o).hideMenu}])},{default:y(()=>[m(e)?(w(),ee("div",Fe,[p(ge)])):S("",!0),p(E,null,{default:y(()=>[p(E,null,{default:y(()=>[m(n)?oe((w(),x(W,{key:0,class:D(`layout-sider${m(e)?"":" layout-no-navbar"}`),breakpoint:"xl",collapsed:m(_),collapsible:!0,width:m(C),"collapsed-width":m(k),"hide-trigger":!0,onCollapse:u},{default:y(()=>[te("div",Le,[p(R)])]),_:1},8,["class","collapsed","width","collapsed-width"])),[[ae,!m(h)]]):S("",!0),m(h)?(w(),x(V,{key:1,visible:d.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:z},{default:y(()=>[p(R)]),_:1},8,["visible"])):S("",!0),p(E,{class:D(m(f)),style:ne(m(s))},{default:y(()=>[p(q,{style:{overflow:"hidden"}},{default:y(()=>[p(Ee)]),_:1})]),_:1},8,["class","style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});var $e=N(Se,[["__scopeId","data-v-74a0aa70"]]);export{$e as default};
