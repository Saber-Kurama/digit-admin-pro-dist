import{ah as V,aj as Y,ai as G,b5 as de,b6 as ge,b7 as _e,b8 as ve}from"./arco.594bef1c.js";import{e as N,a1 as K,r as y,k as b,l as M,a3 as d,c as g,a4 as ee,o as te,v,a2 as ye,A as he,ab as Ce,j as ke,m as k,M as J,ac as be,T as Fe,w as Me,B as Se,p as Ee,s as j,K as we,L as xe,u as O,n as Ae,q as Le}from"./vue.a0c4c8c6.js";import{o as De,u as U,p as Ie,m as ne,q as Re,_ as ze}from"./index.d04fa025.js";import{c as Be}from"./index.b999b102.js";import"./chart.a46ad6d7.js";const Te=N({__name:"index",setup(e){const t=K(),n=[{name:"\u6570\u5B57\u5316\u8425\u9500",type:"1",list:[{icon:"https://image.parligerly.com/protal-svg/mark.svg",logo:"https://image.parligerly.com/protal-svg/mark-logo.svg",title:"Marketing Automation",desc:"\u5168\u6E20\u9053\u81EA\u52A8\u5316\u8FD0\u8425\u4E2D\u67A2"},{icon:"https://image.parligerly.com/protal-svg/insi.svg",logo:"https://image.parligerly.com/protal-svg/insi-logo.svg",title:"Insight Force",desc:"\u7ECF\u8425\u5206\u6790\u5E73\u53F0"}]},{name:"\u6570\u5B57\u5316\u5EFA\u8BBE",type:"2",list:[{icon:"https://image.parligerly.com/protal-svg/metr.svg",logo:"https://image.parligerly.com/protal-svg/metr-logo.svg",title:"Metrics Force",desc:"\u6307\u6807\u5E73\u53F0"},{icon:"https://image.parligerly.com/protal-svg/cust.svg",logo:"https://image.parligerly.com/protal-svg/cust-logo.svg",title:"Customer Engine",desc:"\u7528\u6237\u6570\u636E\u5E73\u53F0"},{icon:"https://image.parligerly.com/protal-svg/data.svg",logo:"https://image.parligerly.com/protal-svg/data-logo.svg",title:"Data Engine",desc:"\u5927\u6570\u636E\u5F00\u53D1\u6CBB\u7406\u5957\u4EF6"}]},{name:"\u6570\u5B57\u5316\u4F9B\u5E94\u94FE",type:"3",list:[{icon:"https://image.parligerly.com/protal-svg/dema.svg",logo:"https://image.parligerly.com/protal-svg/dema-logo.svg",title:"Demand Forecasting",desc:"\u667A\u80FD\u9884\u6D4B"},{icon:"https://image.parligerly.com/protal-svg/repl.svg",logo:"https://image.parligerly.com/protal-svg/repl-logo.svg",title:"Replenishment",desc:"\u667A\u80FD\u8865\u8D27"},{icon:"https://image.parligerly.com/protal-svg/asso.svg",logo:"https://image.parligerly.com/protal-svg/asso-logo.svg",title:"Assortment",desc:"\u667A\u80FD\u9009\u54C1"}]}],s=[],o=[{label:"xxx\u6709\u9650\u516C\u53F8",value:"1",key:"1"},{label:"xxxxxx\u6709\u9650\u516C\u53F8",value:"2",key:"2"}],u=y("https://image.parligerly.com/protal-svg/logo-hom.svg"),a=y(n),l=y(s),r=y("2"),f=y(o),h=y("1"),c=m=>{console.log("item---",m),u.value=m.logo},F=m=>{console.log("key---",m);const i=s.find(p=>p.resourceCode===m);t.push({path:(i==null?void 0:i.resourceLink)||"/"})},_=m=>{console.log("value---",m)};return(m,i)=>(b(),M(d(Be),{logo:u.value,logoMenus:a.value,onLogoMenuClick:c,menus:l.value,activeMenu:r.value,"onUpdate:activeMenu":i[0]||(i[0]=p=>r.value=p),onMenuItemClick:F,tenant:h.value,tenantOptions:f.value,onTenantChange:_},null,8,["logo","logoMenus","menus","activeMenu","tenant","tenantOptions"]))}}),Ne=(e,t)=>{const{target:n="_blank",...s}=t||{};window.open(e,n,Object.entries(s).reduce((o,u)=>{const[a,l]=u;return[...o,`${a}=${l}`]},[]).join(","))},$e=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i");function Ve(){const e=De();return{menuTree:g(()=>e.menus)}}function W(e){if(w(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=E(s)?Pe(s):W(s);if(o)for(const u in o)t[u]=o[u]}return t}else{if(E(e))return e;if(L(e))return e}}const je=/;(?![^(]*\))/g,Oe=/:(.+)/;function Pe(e){const t={};return e.split(je).forEach(n=>{if(n){const s=n.split(Oe);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function q(e){let t="";if(E(e))t=e;else if(w(e))for(let n=0;n<e.length;n++){const s=q(e[n]);s&&(t+=s+" ")}else if(L(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Ke=/^on[^a-z]/,Ue=e=>Ke.test(e),se=Object.assign,w=Array.isArray,D=e=>typeof e=="function",E=e=>typeof e=="string",L=e=>e!==null&&typeof e=="object";function oe(e){return ae(e)?oe(e.__v_raw):!!(e&&e.__v_isReactive)}function ae(e){return!!(e&&e.__v_isReadonly)}function le(e){return oe(e)||ae(e)}function We(e){return!!(e&&e.__v_isRef===!0)}let A=null,qe=null;const He=e=>e.__isSuspense;function Ye(e){return D(e)?{setup:e,name:e.name}:e}const Ge=Symbol(),Je=e=>e.__isTeleport,ue=Symbol(void 0),Qe=Symbol(void 0),Xe=Symbol(void 0);let x=null;function B(e){return e?e.__v_isVNode===!0:!1}const re="__vInternal",ce=({key:e})=>e!=null?e:null,z=({ref:e,ref_key:t,ref_for:n})=>e!=null?E(e)||We(e)||D(e)?{i:A,r:e,k:t,f:!!n}:e:null;function Ze(e,t=null,n=null,s=0,o=null,u=e===ue?0:1,a=!1,l=!1){const r={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ce(t),ref:t&&z(t),scopeId:qe,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null};return l?(H(r,n),u&128&&e.normalize(r)):n&&(r.shapeFlag|=E(n)?8:16),!a&&x&&(r.patchFlag>0||u&6)&&r.patchFlag!==32&&x.push(r),r}const S=et;function et(e,t=null,n=null,s=0,o=null,u=!1){if((!e||e===Ge)&&(e=Xe),B(e)){const l=P(e,t,!0);return n&&H(l,n),!u&&x&&(l.shapeFlag&6?x[x.indexOf(e)]=l:x.push(l)),l.patchFlag|=-2,l}if(st(e)&&(e=e.__vccOpts),t){t=tt(t);let{class:l,style:r}=t;l&&!E(l)&&(t.class=q(l)),L(r)&&(le(r)&&!w(r)&&(r=se({},r)),t.style=W(r))}const a=E(e)?1:He(e)?128:Je(e)?64:L(e)?4:D(e)?2:0;return Ze(e,t,n,s,o,a,u,!0)}function tt(e){return e?le(e)||re in e?se({},e):e:null}function P(e,t,n=!1){const{props:s,ref:o,patchFlag:u,children:a}=e,l=t?ie(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&ce(l),ref:t&&t.ref?n&&o?w(o)?o.concat(z(t)):[o,z(t)]:z(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ue?u===-1?16:u|16:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&P(e.ssContent),ssFallback:e.ssFallback&&P(e.ssFallback),el:e.el,anchor:e.anchor}}function nt(e=" ",t=0){return S(Qe,null,e,t)}function H(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(w(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),H(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!(re in t)?t._ctx=A:o===3&&A&&(A.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else D(t)?(t={default:t,_ctx:A},n=32):(t=String(t),s&64?(n=16,t=[nt(t)]):n=8);e.children=t,e.shapeFlag|=n}function ie(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=q([t.class,s.class]));else if(o==="style")t.style=W([t.style,s.style]);else if(Ue(o)){const u=t[o],a=s[o];a&&u!==a&&!(w(u)&&u.includes(a))&&(t[o]=u?[].concat(u,a):a)}else o!==""&&(t[o]=s[o])}return t}function st(e){return D(e)&&"__vccOpts"in e}function Q(e,t,n){const s=arguments.length;return s===2?L(t)&&!w(t)?B(t)?S(e,null,[t]):S(e,t):S(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&B(n)&&(n=[n]),S(e,t,n))}const X=()=>{};function ot(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!B(e)}const T=Ye({name:"ALeftMenu",components:{Menu:V,MenuItem:Y,SubMenu:G},props:{...V.props,menuTree:{type:Array,default:()=>[]},menuItemClick:{type:Function,default:()=>{}}},setup(e,{attrs:t}){const n=()=>{function a(l,r=[]){return l&&l.forEach(f=>{const h=f.resourceIcon?()=>Q(X(`<${f.resourceIcon}/>`)):null,c=f.childrens&&f.childrens.length!==0?S(G,{key:f==null?void 0:f.resourceCode},{default:()=>[a(f==null?void 0:f.childrens)],icon:h,title:()=>Q(X(f.resourceName||""))}):S(Y,{key:f.resourceCode,onClick:()=>e.menuItemClick(f),class:"a-menu-item-isLeaf"},{default:()=>[f.resourceName||""],icon:h});r.push(c)}),r}return a(e.menuTree)},{menuTree:s,menuItemClick:o,...u}=e;return()=>{let a;return S(V,ie(u,t,{class:"a-left-menu"}),ot(a=n())?a:{default:()=>[a]})}}}),at=e=>{e.component(T.name,T)};T.install=at;var Z=N({emit:["collapse"],setup(){const e=U(),t=K(),n=ee(),s=y([]),{menuTree:o}=Ve(),u=g({get(){return e.device==="desktop"?e.menuCollapse:!1},set(c){e.updateSettings({menuCollapse:c})}});te(()=>{console.log("menuTree.value",o.value),s.value=o.value});const a=y([]),l=y([]),r=c=>{if($e.test((c==null?void 0:c.resourcePath)||"")){Ne(c.resourcePath),l.value=[c.resourceCode];return}if(n.name===c.resourceCode){l.value=[n.name];return}t.push({name:c.resourceCode})},f=c=>{const F=[];let _=!1;const m=(i,p,I)=>{var C;if(i.resourceCode===I){_=!0,F.push(...p,i.resourceCode);return}(C=i.childrens)!=null&&C.length&&i.childrens.forEach($=>{_||m($,[...p,$.resourceCode],I)})};return o.value.forEach(i=>{_||m(i,[i.resourceCode],c)}),F};Ie(c=>{const{requiresAuth:F,activeMenu:_,hideInMenu:m}=c.meta;if(F&&(!m||_)){const i=f(_||c.name),p=new Set([...i,...a.value]);a.value=[...p],l.value=[_||i[i.length-1]]}},!0);const h=c=>{e.device==="desktop"&&e.updateSettings({menuCollapse:c})};return()=>v(T,{collapsed:u.value,"onUpdate:collapsed":c=>u.value=c,"open-keys":a.value,"onUpdate:open-keys":c=>a.value=c,"auto-open":!1,"selected-keys":l.value,"auto-open-selected":!0,onCollapse:h,menuTree:s.value,menuItemClick:r},null)}});function lt(){const e=ne();return{accessRouter(t){var n,s,o,u,a,l;return!((n=t.meta)!=null&&n.requiresAuth)||!((s=t.meta)!=null&&s.roles)||((u=(o=t.meta)==null?void 0:o.roles)==null?void 0:u.includes("*"))||((l=(a=t.meta)==null?void 0:a.roles)==null?void 0:l.includes(e.role))},findFirstPermissionRoute(t,n="admin"){var o,u;const s=[...t];for(;s.length;){const a=s.shift();if((u=(o=a==null?void 0:a.meta)==null?void 0:o.roles)!=null&&u.find(l=>l.includes("*")||l.includes(n)))return{name:a.name};a!=null&&a.children&&s.push(...a.children)}return null}}}function ut(e,t,n,s=!1){e.addEventListener&&typeof e.addEventListener=="function"&&e.addEventListener(t,n,s)}function rt(e,t,n,s=!1){e.removeEventListener&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n,s)}const ct=992;function it(){return document.body.getBoundingClientRect().width-1<ct}function ft(e){const t=U();function n(){if(!document.hidden){const o=it();t.toggleDevice(o?"mobile":"desktop"),t.toggleMenu(o)}}const s=Ce(n,100);te(()=>{e&&s()}),ye(()=>{ut(window,"resize",s)}),he(()=>{rt(window,"resize",s)})}const mt=N({__name:"page-layout",setup(e){const t=Re(),n=g(()=>t.getCacheList);return(s,o)=>{const u=ke("router-view");return b(),M(u,null,{default:k(({Component:a,route:l})=>[v(Fe,{name:"fade",mode:"out-in",appear:""},{default:k(()=>[l.meta.ignoreCache?(b(),M(J(a),{key:l.fullPath})):(b(),M(be,{key:1,include:d(n)},[(b(),M(J(a),{key:l.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}});const pt={key:0,class:"layout-navbar"},dt={class:"menu-wrapper"},gt=N({__name:"default-layout",setup(e){const t=U(),n=ne(),s=K(),o=ee(),u=lt();ft(!0);const a=g(()=>t.navbar),l=g(()=>t.menu),r=g(()=>t.hideMenu),f=g(()=>t.menuMinWidth),h=g(()=>t.menuMaxWidth),c=g(()=>t.menuCollapse?f.value:h.value),F=g(()=>t.menuCollapse),_=g(()=>a.value?"layout-content layout-content-padding-top":"layout-content"),m=g(()=>({...l.value&&!r.value?{paddingLeft:`${c.value}`}:{}})),i=C=>{t.updateSettings({menuCollapse:C})};Me(()=>n.role,C=>{C&&!u.accessRouter(o)&&s.push({name:"notFound"})});const p=y(!1),I=()=>{p.value=!1};return Se("toggleDrawerMenu",()=>{p.value=!p.value}),(C,$)=>{const fe=de,me=ge,pe=_e,R=ve;return b(),M(R,{class:O(["layout",{mobile:d(t).hideMenu}])},{default:k(()=>[d(a)?(b(),Ee("div",pt,[v(Te)])):j("",!0),v(R,null,{default:k(()=>[v(R,null,{default:k(()=>[d(l)?we((b(),M(fe,{key:0,class:O(`layout-sider${d(a)?"":" layout-no-navbar"}`),breakpoint:"xl",collapsed:d(F),collapsible:!0,width:d(h),"collapsed-width":d(f),"hide-trigger":!0,onCollapse:i},{default:k(()=>[Ae("div",dt,[v(Z)])]),_:1},8,["class","collapsed","width","collapsed-width"])),[[xe,!d(r)]]):j("",!0),d(r)?(b(),M(me,{key:1,visible:p.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:I},{default:k(()=>[v(Z)]),_:1},8,["visible"])):j("",!0),v(R,{class:O(d(_)),style:Le(d(m))},{default:k(()=>[v(pe,{style:{overflow:"hidden"}},{default:k(()=>[v(mt)]),_:1})]),_:1},8,["class","style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});var kt=ze(gt,[["__scopeId","data-v-74a0aa70"]]);export{kt as default};
