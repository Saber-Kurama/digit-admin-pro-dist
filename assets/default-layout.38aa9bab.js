import{d as M,a as b,q as y,aB as _,u as g,c as v,aG as f,b1 as N,aV as K,h as A,bI as j,aW as U,aX as V,aM as W,aL as q,bJ as H,aA as G,aH as h,bE as R,bK as J,bL as Q,w as X,p as Y,v as Z,aT as F,bM as ee,bN as oe,x as L,z as te,y as ae,bO as re,bP as ne,bQ as le,bR as ie}from"./arco.8a79e78f.js";import{u as D,e as I,f as se}from"./vue.7151ec83.js";import{e as ce,u as B,l as ue,_ as O,d as P,f as de}from"./index.e3ecc5d6.js";import{a as pe}from"./index.525319f1.js";const me=M({__name:"index",setup(t){const o=D(),i=[{name:"\u6570\u5B57\u5316\u8425\u9500",type:"1",list:[{icon:"https://image.parligerly.com/protal-svg/mark.svg",logo:"https://image.parligerly.com/protal-svg/mark-logo.svg",title:"Marketing Automation",desc:"\u5168\u6E20\u9053\u81EA\u52A8\u5316\u8FD0\u8425\u4E2D\u67A2"},{icon:"https://image.parligerly.com/protal-svg/insi.svg",logo:"https://image.parligerly.com/protal-svg/insi-logo.svg",title:"Insight Force",desc:"\u7ECF\u8425\u5206\u6790\u5E73\u53F0"}]},{name:"\u6570\u5B57\u5316\u5EFA\u8BBE",type:"2",list:[{icon:"https://image.parligerly.com/protal-svg/metr.svg",logo:"https://image.parligerly.com/protal-svg/metr-logo.svg",title:"Metrics Force",desc:"\u6307\u6807\u5E73\u53F0"},{icon:"https://image.parligerly.com/protal-svg/cust.svg",logo:"https://image.parligerly.com/protal-svg/cust-logo.svg",title:"Customer Engine",desc:"\u7528\u6237\u6570\u636E\u5E73\u53F0"},{icon:"https://image.parligerly.com/protal-svg/data.svg",logo:"https://image.parligerly.com/protal-svg/data-logo.svg",title:"Data Engine",desc:"\u5927\u6570\u636E\u5F00\u53D1\u6CBB\u7406\u5957\u4EF6"}]},{name:"\u6570\u5B57\u5316\u4F9B\u5E94\u94FE",type:"3",list:[{icon:"https://image.parligerly.com/protal-svg/dema.svg",logo:"https://image.parligerly.com/protal-svg/dema-logo.svg",title:"Demand Forecasting",desc:"\u667A\u80FD\u9884\u6D4B"},{icon:"https://image.parligerly.com/protal-svg/repl.svg",logo:"https://image.parligerly.com/protal-svg/repl-logo.svg",title:"Replenishment",desc:"\u667A\u80FD\u8865\u8D27"},{icon:"https://image.parligerly.com/protal-svg/asso.svg",logo:"https://image.parligerly.com/protal-svg/asso-logo.svg",title:"Assortment",desc:"\u667A\u80FD\u9009\u54C1"}]}],n=[],c=[{label:"xxx\u6709\u9650\u516C\u53F8",value:"1",key:"1"},{label:"xxxxxx\u6709\u9650\u516C\u53F8",value:"2",key:"2"}],s=b("https://image.parligerly.com/protal-svg/logo-hom.svg"),a=b(i),u=b(n),w=b("2"),x=b(c),k=b("1"),r=e=>{console.log("item---",e),s.value=e.logo},p=e=>{console.log("key---",e);const l=n.find(d=>d.resourceCode===e);o.push({path:(l==null?void 0:l.resourceLink)||"/"})},m=e=>{console.log("value---",e)};return(e,l)=>(y(),_(g(pe),{logo:s.value,logoMenus:a.value,onLogoMenuClick:r,menus:u.value,activeMenu:w.value,"onUpdate:activeMenu":l[0]||(l[0]=d=>w.value=d),onMenuItemClick:p,tenant:k.value,tenantOptions:x.value,onTenantChange:m},null,8,["logo","logoMenus","menus","activeMenu","tenant","tenantOptions"]))}}),ge=(t,o)=>{const{target:i="_blank",...n}=o||{};window.open(t,i,Object.entries(n).reduce((c,s)=>{const[a,u]=s;return[...c,`${a}=${u}`]},[]).join(","))},fe=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i");function ve(){const t=ce();return{menuTree:v(()=>t.menus)}}function he(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!N(t)}var be=M({emit:["collapse"],setup(){const t=B(),o=D(),i=I(),{menuTree:n}=ve(),c=v({get(){return t.device==="desktop"?t.menuCollapse:!1},set(r){t.updateSettings({menuCollapse:r})}}),s=b([]),a=b([]),u=r=>{if(fe.test((r==null?void 0:r.resourcePath)||"")){ge(r.resourcePath),a.value=[r.resourceCode];return}if(i.name===r.resourceCode){a.value=[i.name];return}o.push({name:r.resourceCode})},w=r=>{const p=[];let m=!1;const e=(l,d,E)=>{var C;if(l.resourceCode===E){m=!0,p.push(...d,l.resourceCode);return}(C=l.childrens)!=null&&C.length&&l.childrens.forEach(S=>{e(S,[...d],E)})};return n.value.forEach(l=>{m||e(l,[l.resourceCode],r)}),p};ue(r=>{const{requiresAuth:p,activeMenu:m,hideInMenu:e}=r.meta;if(p&&(!e||m)){const l=w(m||r.name),d=new Set([...l,...s.value]);s.value=[...d],a.value=[m||l[l.length-1]]}},!0);const x=r=>{t.device==="desktop"&&t.updateSettings({menuCollapse:r})},k=()=>{function r(p,m=[]){return p&&p.forEach(e=>{const l=e.resourceIcon?()=>A(j(`<${e.resourceIcon}/>`)):null,d=e.childrens&&e.childrens.length!==0?f(U,{key:e==null?void 0:e.resourceCode},{default:()=>[r(e==null?void 0:e.childrens)],icon:l,title:()=>A(j(e.resourceName||""))}):f(V,{key:e.resourceCode,onClick:()=>u(e)},{default:()=>[e.resourceName||""],icon:l});m.push(d)}),m}return r(n.value)};return()=>{let r;return f(K,{collapsed:c.value,"onUpdate:collapsed":p=>c.value=p,"open-keys":s.value,"onUpdate:open-keys":p=>s.value=p,"show-collapse-button":t.device!=="mobile","auto-open":!1,"selected-keys":a.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%",onCollapse:x},he(r=k())?r:{default:()=>[r]})}}});var $=O(be,[["__scopeId","data-v-0ca54ba7"]]);function ye(){const t=P();return{accessRouter(o){var i,n,c,s,a,u;return!((i=o.meta)!=null&&i.requiresAuth)||!((n=o.meta)!=null&&n.roles)||((s=(c=o.meta)==null?void 0:c.roles)==null?void 0:s.includes("*"))||((u=(a=o.meta)==null?void 0:a.roles)==null?void 0:u.includes(t.role))},findFirstPermissionRoute(o,i="admin"){var c,s;const n=[...o];for(;n.length;){const a=n.shift();if((s=(c=a==null?void 0:a.meta)==null?void 0:c.roles)!=null&&s.find(u=>u.includes("*")||u.includes(i)))return{name:a.name};a!=null&&a.children&&n.push(...a.children)}return null}}}function we(t,o,i,n=!1){t.addEventListener&&typeof t.addEventListener=="function"&&t.addEventListener(o,i,n)}function _e(t,o,i,n=!1){t.removeEventListener&&typeof t.removeEventListener=="function"&&t.removeEventListener(o,i,n)}const xe=992;function ke(){return document.body.getBoundingClientRect().width-1<xe}function Ce(t){const o=B();function i(){if(!document.hidden){const c=ke();o.toggleDevice(c?"mobile":"desktop"),o.toggleMenu(c)}}const n=se(i,100);W(()=>{t&&n()}),q(()=>{we(window,"resize",n)}),H(()=>{_e(window,"resize",n)})}const ze=M({__name:"page-layout",setup(t){const o=de(),i=v(()=>o.getCacheList);return(n,c)=>{const s=G("router-view");return y(),_(s,null,{default:h(({Component:a,route:u})=>[f(Q,{name:"fade",mode:"out-in",appear:""},{default:h(()=>[u.meta.ignoreCache?(y(),_(R(a),{key:u.fullPath})):(y(),_(J,{key:1,include:g(i)},[(y(),_(R(a),{key:u.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}});const Me={key:0,class:"layout-navbar"},Ee={class:"menu-wrapper"},Se=M({__name:"default-layout",setup(t){const o=B(),i=P(),n=D(),c=I(),s=ye();Ce(!0);const a=v(()=>o.navbar),u=v(()=>o.menu),w=v(()=>o.hideMenu),x=v(()=>o.menuCollapse?48:o.menuWidth),k=v(()=>o.menuCollapse),r=v(()=>a.value?"layout-content layout-content-padding-top":"layout-content"),p=v(()=>({...u.value&&!w.value?{paddingLeft:`${x.value}px`}:{}})),m=d=>{o.updateSettings({menuCollapse:d})};X(()=>i.role,d=>{d&&!s.accessRouter(c)&&n.push({name:"notFound"})});const e=b(!1),l=()=>{e.value=!1};return Y("toggleDrawerMenu",()=>{e.value=!e.value}),(d,E)=>{const C=re,S=ne,T=le,z=ie;return y(),_(z,{class:L(["layout",{mobile:g(o).hideMenu}])},{default:h(()=>[g(a)?(y(),Z("div",Me,[f(me)])):F("",!0),f(z,null,{default:h(()=>[f(z,null,{default:h(()=>[g(u)?ee((y(),_(C,{key:0,class:L(`layout-sider${g(a)?"":" layout-no-navbar"}`),breakpoint:"xl",collapsed:g(k),collapsible:!0,width:g(x),"hide-trigger":!0,onCollapse:m},{default:h(()=>[te("div",Ee,[f($)])]),_:1},8,["class","collapsed","width"])),[[oe,!g(w)]]):F("",!0),g(w)?(y(),_(S,{key:1,visible:e.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:l},{default:h(()=>[f($)]),_:1},8,["visible"])):F("",!0),f(z,{class:L(g(r)),style:ae(g(p))},{default:h(()=>[f(T,null,{default:h(()=>[f(ze)]),_:1})]),_:1},8,["class","style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});var Ae=O(Se,[["__scopeId","data-v-074c2448"]]);export{Ae as default};
