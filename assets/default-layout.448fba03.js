import{d as L,a as f,x as y,b4 as w,u as p,c as d,aY as z,aC as v,cf as I,cg as U,aZ as K,a_ as _,ch as V,c9 as A,ci as N,w as j,p as q,y as H,a$ as F,cj as Y,z as D,B as Z,ck as G,A as J,cl as Q,b9 as X,cm as ee,cn as te}from"./arco.0f8f7318.js";import{e as S,f as P,g as oe}from"./vue.2b1a2a3a.js";import{$ as ne,u as B,a0 as se,Y as R,a1 as ae,_ as ue}from"./index.d62325bd.js";import{b as le,c as re}from"./index.esm.e3228605.js";import"./chart.24008d58.js";const ce=L({__name:"index",setup(s){const e=S(),l=[{name:"\u6570\u5B57\u5316\u8425\u9500",type:"1",list:[{icon:"https://image.parligerly.com/protal-svg/mark.svg",logo:"https://image.parligerly.com/protal-svg/mark-logo.svg",title:"Marketing Automation",desc:"\u5168\u6E20\u9053\u81EA\u52A8\u5316\u8FD0\u8425\u4E2D\u67A2"},{icon:"https://image.parligerly.com/protal-svg/insi.svg",logo:"https://image.parligerly.com/protal-svg/insi-logo.svg",title:"Insight Force",desc:"\u7ECF\u8425\u5206\u6790\u5E73\u53F0"}]},{name:"\u6570\u5B57\u5316\u5EFA\u8BBE",type:"2",list:[{icon:"https://image.parligerly.com/protal-svg/metr.svg",logo:"https://image.parligerly.com/protal-svg/metr-logo.svg",title:"Metrics Force",desc:"\u6307\u6807\u5E73\u53F0"},{icon:"https://image.parligerly.com/protal-svg/cust.svg",logo:"https://image.parligerly.com/protal-svg/cust-logo.svg",title:"Customer Engine",desc:"\u7528\u6237\u6570\u636E\u5E73\u53F0"},{icon:"https://image.parligerly.com/protal-svg/data.svg",logo:"https://image.parligerly.com/protal-svg/data-logo.svg",title:"Data Engine",desc:"\u5927\u6570\u636E\u5F00\u53D1\u6CBB\u7406\u5957\u4EF6"}]},{name:"\u6570\u5B57\u5316\u4F9B\u5E94\u94FE",type:"3",list:[{icon:"https://image.parligerly.com/protal-svg/dema.svg",logo:"https://image.parligerly.com/protal-svg/dema-logo.svg",title:"Demand Forecasting",desc:"\u667A\u80FD\u9884\u6D4B"},{icon:"https://image.parligerly.com/protal-svg/repl.svg",logo:"https://image.parligerly.com/protal-svg/repl-logo.svg",title:"Replenishment",desc:"\u667A\u80FD\u8865\u8D27"},{icon:"https://image.parligerly.com/protal-svg/asso.svg",logo:"https://image.parligerly.com/protal-svg/asso-logo.svg",title:"Assortment",desc:"\u667A\u80FD\u9009\u54C1"}]}],o=[],r=[{label:"xxx\u6709\u9650\u516C\u53F8",value:"1",key:"1"},{label:"xxxxxx\u6709\u9650\u516C\u53F8",value:"2",key:"2"}],c=f("https://image.parligerly.com/protal-svg/logo-hom.svg"),t=f(l),u=f(o),C=f("2"),b=f(r),n=f("1"),k=a=>{console.log("item---",a),c.value=a.logo},g=a=>{console.log("key---",a);const i=o.find(m=>m.resourceCode===a);e.push({path:(i==null?void 0:i.resourceLink)||"/"})},M=a=>{console.log("value---",a)};return(a,i)=>(y(),w(p(le),{logo:c.value,logoMenus:t.value,onLogoMenuClick:k,menus:u.value,activeMenu:C.value,"onUpdate:activeMenu":i[0]||(i[0]=m=>C.value=m),onMenuItemClick:g,tenant:n.value,tenantOptions:b.value,onTenantChange:M},null,8,["logo","logoMenus","menus","activeMenu","tenant","tenantOptions"]))}}),ie=(s,e)=>{const{target:l="_blank",...o}=e||{};window.open(s,l,Object.entries(o).reduce((r,c)=>{const[t,u]=c;return[...r,`${t}=${u}`]},[]).join(","))},pe=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i");function de(){const s=ne();return{menuTree:d(()=>s.menus)}}var $=L({emit:["collapse"],setup(){const s=B(),e=S(),l=P(),o=f([]),{menuTree:r}=de(),c=d({get(){return s.device==="desktop"?s.menuCollapse:!1},set(n){s.updateSettings({menuCollapse:n})}});z(()=>{console.log("menuTree.value",r.value),o.value=r.value});const t=f([]),u=f([]),C=n=>{if(pe.test((n==null?void 0:n.resourcePath)||"")){ie(n.resourcePath),u.value=[n.resourcePath];return}if(l.fullPath===n.resourceLink){u.value=[n.resourceCode];return}e.push({path:n.resourceLink})},b=n=>{const k=[];let g=!1;const M=(a,i,m)=>{var x;if(a.resourceLink===m){g=!0,k.push(...i,a.resourceCode);return}(x=a.childrens)!=null&&x.length&&a.childrens.forEach(h=>{g||M(h,[...i,h.resourceCode],m)})};return r.value.forEach(a=>{g||M(a,[a.resourceCode],n)}),k};return se(n=>{const{requiresAuth:k,activeMenu:g,hideInMenu:M}=n.meta;if(k&&(!M||g)){const a=b(g||n.fullPath),i=new Set([...a,...t.value]);t.value=[...i],u.value=[g||a[a.length-1]]}},!0),()=>v(re,{collapsed:c.value,"onUpdate:collapsed":n=>c.value=n,"open-keys":t.value,"onUpdate:open-keys":n=>t.value=n,"auto-open":!1,"selected-keys":u.value,"auto-open-selected":!0,menuTree:o.value,menuItemClick:C},null)}});function ge(){const s=R();return{accessRouter(e){var l,o,r,c,t,u;return!((l=e.meta)!=null&&l.requiresAuth)||!((o=e.meta)!=null&&o.roles)||((c=(r=e.meta)==null?void 0:r.roles)==null?void 0:c.includes("*"))||((u=(t=e.meta)==null?void 0:t.roles)==null?void 0:u.includes(s.role))},findFirstPermissionRoute(e,l="admin"){var r,c;const o=[...e];for(;o.length;){const t=o.shift();if((c=(r=t==null?void 0:t.meta)==null?void 0:r.roles)!=null&&c.find(u=>u.includes("*")||u.includes(l)))return{name:t.name};t!=null&&t.children&&o.push(...t.children)}return null}}}function me(s,e,l,o=!1){s.addEventListener&&typeof s.addEventListener=="function"&&s.addEventListener(e,l,o)}function ve(s,e,l,o=!1){s.removeEventListener&&typeof s.removeEventListener=="function"&&s.removeEventListener(e,l,o)}const fe=992;function he(){return document.body.getBoundingClientRect().width-1<fe}function _e(s){const e=B();function l(){if(!document.hidden){const r=he();e.toggleDevice(r?"mobile":"desktop"),e.toggleMenu(r)}}const o=oe(l,100);z(()=>{s&&o()}),I(()=>{me(window,"resize",o)}),U(()=>{ve(window,"resize",o)})}const ye=L({__name:"page-layout",setup(s){const e=ae(),l=d(()=>e.getCacheList);return(o,r)=>{const c=K("router-view");return y(),w(c,null,{default:_(({Component:t,route:u})=>[v(V,{name:"fade",mode:"out-in",appear:""},{default:_(()=>[u.meta.ignoreCache?(y(),w(A(t),{key:u.fullPath})):(y(),w(N,{key:1,include:p(l)},[(y(),w(A(t),{key:u.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}});const Ce={key:0,class:"layout-navbar"},ke={class:"menu-wrapper"},Me=L({__name:"default-layout",setup(s){const e=B(),l=R(),o=S(),r=P(),c=ge();_e(!0);const t=d(()=>e.navbar),u=d(()=>e.menu),C=d(()=>e.hideMenu),b=d(()=>e.menuMinWidth),n=d(()=>e.menuMaxWidth),k=d(()=>e.menuCollapse?b.value:n.value),g=d(()=>e.menuCollapse),M=d(()=>t.value?"layout-content layout-content-padding-top":"layout-content"),a=d(()=>({...u.value&&!C.value?{paddingLeft:`${k.value}`}:{}})),i=h=>{e.updateSettings({menuCollapse:h})};j(()=>l.role,h=>{h&&!c.accessRouter(r)&&o.push({name:"notFound"})});const m=f(!1),x=()=>{m.value=!1};return q("toggleDrawerMenu",()=>{m.value=!m.value}),(h,we)=>{const T=Q,O=X,W=ee,E=te;return y(),w(E,{class:D(["layout",{mobile:p(e).hideMenu}])},{default:_(()=>[p(t)?(y(),H("div",Ce,[v(ce)])):F("",!0),v(E,null,{default:_(()=>[v(E,null,{default:_(()=>[p(u)?Y((y(),w(T,{key:0,class:D(`layout-sider${p(t)?"":" layout-no-navbar"}`),breakpoint:"xl",collapsed:p(g),collapsible:!0,width:p(n),"collapsed-width":p(b),"hide-trigger":!0,onCollapse:i},{default:_(()=>[Z("div",ke,[v($)])]),_:1},8,["class","collapsed","width","collapsed-width"])),[[G,!p(C)]]):F("",!0),p(C)?(y(),w(O,{key:1,visible:m.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:x},{default:_(()=>[v($)]),_:1},8,["visible"])):F("",!0),v(E,{class:D(p(M)),style:J(p(a))},{default:_(()=>[v(W,{style:{overflow:"hidden"}},{default:_(()=>[v(ye)]),_:1})]),_:1},8,["class","style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});var De=ue(Me,[["__scopeId","data-v-74a0aa70"]]);export{De as default};
